/*
 _____                         _____            _ _            _   _                    ______       _   
|  _  |                       /  ___|          (_) |          | \ | |                   | ___ \     | |  
| | | |_   _  ___  ___ _ __   \ `--. _ __  _ __ _| | ___   _  |  \| | _____      _____  | |_/ / ___ | |_ 
| | | | | | |/ _ \/ _ \ '_ \   `--. \ '_ \| '__| | |/ / | | | | . ` |/ _ \ \ /\ / / __| | ___ \/ _ \| __|
\ \/' / |_| |  __/  __/ | | | /\__/ / |_) | |  | |   <| |_| | | |\  |  __/\ V  V /\__ \ | |_/ / (_) | |_ 
 \_/\_\\__,_|\___|\___|_| |_| \____/| .__/|_|  |_|_|\_\\__, | \_| \_/\___| \_/\_/ |___/ \____/ \___/ \__|
                                    | |                 __/ |                                            
                                    |_|                |___/                                             
Project Name : Queen Spriky MD News Bot
Developer : Udavin
Version : 1.0
*/

function _0x138d(_0x15c30a,_0x798ad6){const _0x578243=_0x5782();return _0x138d=function(_0x138db4,_0x3095b9){_0x138db4=_0x138db4-0x164;let _0x1b48ee=_0x578243[_0x138db4];return _0x1b48ee;},_0x138d(_0x15c30a,_0x798ad6);}const _0x2c10c5=_0x138d;(function(_0x56794f,_0x3eba67){const _0x5b2ebc=_0x138d,_0x2a5a0f=_0x56794f();while(!![]){try{const _0x393f8c=-parseInt(_0x5b2ebc(0x167))/0x1*(-parseInt(_0x5b2ebc(0x178))/0x2)+-parseInt(_0x5b2ebc(0x177))/0x3*(-parseInt(_0x5b2ebc(0x188))/0x4)+-parseInt(_0x5b2ebc(0x175))/0x5+-parseInt(_0x5b2ebc(0x17c))/0x6+-parseInt(_0x5b2ebc(0x193))/0x7+-parseInt(_0x5b2ebc(0x189))/0x8*(-parseInt(_0x5b2ebc(0x180))/0x9)+parseInt(_0x5b2ebc(0x17f))/0xa*(parseInt(_0x5b2ebc(0x171))/0xb);if(_0x393f8c===_0x3eba67)break;else _0x2a5a0f['push'](_0x2a5a0f['shift']());}catch(_0x43c6ac){_0x2a5a0f['push'](_0x2a5a0f['shift']());}}}(_0x5782,0xe0192));const {cmd}=require('../command'),Hiru=require(_0x2c10c5(0x16e)),Esana=require(_0x2c10c5(0x16c));let activeGroups={},lastNewsTitles={};async function getLatestNews(){const _0x2259bd=_0x2c10c5;let _0x2f8761=[];try{const _0x3a52f8=new Hiru(),_0x300039=await _0x3a52f8[_0x2259bd(0x164)]();_0x2f8761[_0x2259bd(0x192)]({'title':_0x300039[_0x2259bd(0x18a)][_0x2259bd(0x17a)],'content':_0x300039[_0x2259bd(0x18a)][_0x2259bd(0x17e)],'date':_0x300039[_0x2259bd(0x18a)][_0x2259bd(0x185)]});}catch(_0x2201a0){console[_0x2259bd(0x17b)](_0x2259bd(0x184)+_0x2201a0['message']);}try{const _0x2562f1=new Esana(),_0x5bb384=await _0x2562f1[_0x2259bd(0x196)]();_0x5bb384&&_0x5bb384[_0x2259bd(0x17a)]&&_0x5bb384[_0x2259bd(0x186)]&&_0x5bb384[_0x2259bd(0x190)]?_0x2f8761[_0x2259bd(0x192)]({'title':_0x5bb384[_0x2259bd(0x17a)],'content':_0x5bb384[_0x2259bd(0x186)],'date':_0x5bb384[_0x2259bd(0x190)]}):console[_0x2259bd(0x17b)](_0x2259bd(0x165));}catch(_0x15f353){console[_0x2259bd(0x17b)](_0x2259bd(0x18b)+_0x15f353[_0x2259bd(0x183)]);}return _0x2f8761;}async function checkAndPostNews(_0x20708b,_0x15f268){const _0x211836=_0x2c10c5,_0x767b66=await getLatestNews();_0x767b66[_0x211836(0x194)](async _0x58eaf3=>{const _0x131e81=_0x211836;!lastNewsTitles[_0x15f268]&&(lastNewsTitles[_0x15f268]=[]),!lastNewsTitles[_0x15f268][_0x131e81(0x195)](_0x58eaf3[_0x131e81(0x17a)])&&(await _0x20708b[_0x131e81(0x166)](_0x15f268,{'text':_0x131e81(0x172)+_0x58eaf3[_0x131e81(0x17a)]+'*\x0a'+_0x58eaf3[_0x131e81(0x17d)]+'\x0a'+_0x58eaf3[_0x131e81(0x185)]+'\x0a*Queen\x20Spriky\x20MD\x20News*'}),lastNewsTitles[_0x15f268][_0x131e81(0x192)](_0x58eaf3['title']),lastNewsTitles[_0x15f268][_0x131e81(0x16b)]>0x64&&lastNewsTitles[_0x15f268][_0x131e81(0x173)]());});}function _0x5782(){const _0x37fdba=['shift','checksprikynews','8358395zCWLYq','some','466545cKUgyK','6XCTlgo','ðŸ“°\x2024/7\x20News\x20Already\x20Activated.','title','error','9710934AFlgYw','content','news','10FwwOmx','31833vINSJG','jid','ðŸ›‘\x2024/7\x20News\x20Deactivated.','message','Error\x20fetching\x20Hiru\x20News:\x20','date','description','Disable\x20Sri\x20Lankan\x20news\x20updates\x20in\x20this\x20group','4HfqCky','32nKjdoy','results','Error\x20fetching\x20Esana\x20News:\x20','Enable\x20Sri\x20Lankan\x20news\x20updates\x20in\x20this\x20group','Failed\x20to\x20activate\x20the\x20news\x20service.','sender','ðŸ›‘\x2024/7\x20News\x20is\x20not\x20active\x20in\x20this\x20group.','publishedAt','ðŸ“°\x2024/7\x20News\x20Activated.','push','10114650pwJyJD','forEach','includes','getLatestNews','interval','stopsprikynews','ðŸš«\x20This\x20command\x20can\x20only\x20be\x20used\x20by\x20group\x20admins\x20or\x20the\x20bot\x20owner.','BreakingNews','Error:\x20Esana\x20News\x20returned\x20invalid\x20data.','sendMessage','338634eWcODj','Error\x20in\x20stopsprikynews\x20command:\x20','Error\x20in\x20sprikynews\x20command:\x20','Failed\x20to\x20fetch\x20Hiru\x20News.','length','@sl-code-lords/esana-news','ðŸ“°\x20The\x2024/7\x20news\x20service\x20is\x20currently\x20active\x20in\x20this\x20group.','hirunews-scrap','hirunews','admin','49142049lbBHGO','ðŸ“°\x20*'];_0x5782=function(){return _0x37fdba;};return _0x5782();}async function getHiruNews(){const _0x2e876d=_0x2c10c5;try{const _0x4bb57b=new Hiru(),_0x4aaa06=await _0x4bb57b['BreakingNews']();return{'title':_0x4aaa06[_0x2e876d(0x18a)]['title'],'content':_0x4aaa06['results']['news'],'date':_0x4aaa06[_0x2e876d(0x18a)][_0x2e876d(0x185)]};}catch(_0x2f38e0){return console['error']('Error\x20fetching\x20Hiru\x20News:\x20'+_0x2f38e0[_0x2e876d(0x183)]),null;}}cmd({'pattern':_0x2c10c5(0x16f),'desc':'Fetch\x20the\x20latest\x20news\x20from\x20Hiru','react':'ðŸ“°','category':_0x2c10c5(0x17e),'filename':__filename},async(_0x4d3546,_0x2498ca,_0x29f1d5,{from:_0x3eb754})=>{const _0x5eb4fb=_0x2c10c5,_0x4348ab=await getHiruNews();_0x4348ab?await _0x4d3546[_0x5eb4fb(0x166)](_0x3eb754,{'text':_0x5eb4fb(0x172)+_0x4348ab[_0x5eb4fb(0x17a)]+'*\x0a'+_0x4348ab['content']+'\x0a'+_0x4348ab[_0x5eb4fb(0x185)]+'\x20\x0a*Queen\x20Spriky\x20MD\x20News*'}):await _0x4d3546[_0x5eb4fb(0x166)](_0x3eb754,{'text':_0x5eb4fb(0x16a)});}),cmd({'pattern':'sprikynews','desc':_0x2c10c5(0x18c),'isGroup':!![],'react':'ðŸ“°','filename':__filename},async(_0x3e4516,_0x4b745e,_0x10382d,{from:_0x4106a2,isGroup:_0x3646b1,participants:_0x273c1f})=>{const _0x278692=_0x2c10c5;try{if(_0x3646b1){const _0x6236db=_0x273c1f['some'](_0x1e4554=>_0x1e4554['id']===_0x4b745e[_0x278692(0x18e)]&&_0x1e4554[_0x278692(0x170)]),_0x3e066c=_0x4b745e[_0x278692(0x18e)]===_0x3e4516['user']['jid'];_0x6236db||_0x3e066c?!activeGroups[_0x4106a2]?(activeGroups[_0x4106a2]=!![],await _0x3e4516[_0x278692(0x166)](_0x4106a2,{'text':_0x278692(0x191)}),!activeGroups[_0x278692(0x197)]&&(activeGroups[_0x278692(0x197)]=setInterval(async()=>{for(const _0x595ef7 in activeGroups){activeGroups[_0x595ef7]&&_0x595ef7!=='interval'&&await checkAndPostNews(_0x3e4516,_0x595ef7);}},0xea60))):await _0x3e4516[_0x278692(0x166)](_0x4106a2,{'text':_0x278692(0x179)}):await _0x3e4516[_0x278692(0x166)](_0x4106a2,{'text':_0x278692(0x199)});}else await _0x3e4516[_0x278692(0x166)](_0x4106a2,{'text':'This\x20command\x20can\x20only\x20be\x20used\x20in\x20groups.'});}catch(_0x922203){console['error'](_0x278692(0x169)+_0x922203[_0x278692(0x183)]),await _0x3e4516[_0x278692(0x166)](_0x4106a2,{'text':_0x278692(0x18d)});}}),cmd({'pattern':_0x2c10c5(0x198),'desc':_0x2c10c5(0x187),'isGroup':!![],'react':'ðŸ›‘','filename':__filename},async(_0x326842,_0x16fd9a,_0x45ce2c,{from:_0x4d66a8,isGroup:_0x201b3d,participants:_0x5b8f17})=>{const _0x54f5ed=_0x2c10c5;try{if(_0x201b3d){const _0x46f891=_0x5b8f17[_0x54f5ed(0x176)](_0x21531b=>_0x21531b['id']===_0x16fd9a[_0x54f5ed(0x18e)]&&_0x21531b['admin']),_0x6c2dad=_0x16fd9a[_0x54f5ed(0x18e)]===_0x326842['user'][_0x54f5ed(0x181)];_0x46f891||_0x6c2dad?activeGroups[_0x4d66a8]?(delete activeGroups[_0x4d66a8],await _0x326842[_0x54f5ed(0x166)](_0x4d66a8,{'text':_0x54f5ed(0x182)}),Object['keys'](activeGroups)[_0x54f5ed(0x16b)]===0x1&&activeGroups['interval']&&(clearInterval(activeGroups[_0x54f5ed(0x197)]),delete activeGroups['interval'])):await _0x326842[_0x54f5ed(0x166)](_0x4d66a8,{'text':_0x54f5ed(0x18f)}):await _0x326842[_0x54f5ed(0x166)](_0x4d66a8,{'text':'ðŸš«\x20This\x20command\x20can\x20only\x20be\x20used\x20by\x20group\x20admins\x20or\x20the\x20bot\x20owner.'});}else await _0x326842[_0x54f5ed(0x166)](_0x4d66a8,{'text':'This\x20command\x20can\x20only\x20be\x20used\x20in\x20groups.'});}catch(_0x3abf96){console[_0x54f5ed(0x17b)](_0x54f5ed(0x168)+_0x3abf96['message']),await _0x326842['sendMessage'](_0x4d66a8,{'text':'Failed\x20to\x20deactivate\x20the\x20news\x20service.'});}}),cmd({'pattern':_0x2c10c5(0x174),'desc':'Check\x20if\x20the\x20Sri\x20Lankan\x20news\x20service\x20is\x20active\x20in\x20this\x20group','isGroup':!![],'react':'ðŸ”','filename':__filename},async(_0x1e33f4,_0x43a736,_0x4ea8f9,{from:_0x5667e1})=>{const _0x2312f=_0x2c10c5;activeGroups[_0x5667e1]?await _0x1e33f4[_0x2312f(0x166)](_0x5667e1,{'text':_0x2312f(0x16d)}):await _0x1e33f4[_0x2312f(0x166)](_0x5667e1,{'text':'ðŸ›‘\x20The\x2024/7\x20news\x20service\x20is\x20not\x20active\x20in\x20this\x20group.'});});
